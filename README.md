# ğŸ›ï¸ Design Pattern Project: ê°•ì˜ì‹¤ ì˜ˆì•½ ì‹œìŠ¤í…œ (Server)

## ğŸ“– Project Overview
ì´ í”„ë¡œì íŠ¸ëŠ” ê¸°ì¡´ì˜ ì ˆì°¨ì§€í–¥ì ìœ¼ë¡œ ì‘ì„±ëœ ê°•ì˜ì‹¤ ì˜ˆì•½ ì‹œìŠ¤í…œì„ **ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™(SOLID)**ê³¼ **GOF ë””ìì¸ íŒ¨í„´**ì„ ì ìš©í•˜ì—¬ ë¦¬íŒ©í† ë§í•œ ê²°ê³¼ë¬¼ì…ë‹ˆë‹¤.
Java Socket í†µì‹ **ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ C/S(Client-Server) ì•„í‚¤í…ì²˜**ë¥¼ ë”°ë¥´ë©°, ë³¸ ë ˆí¬ì§€í† ë¦¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„° ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” **Server** ì†ŒìŠ¤ ì½”ë“œë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

[ğŸ“„ **í”„ë¡œì íŠ¸ ê²°ê³¼ë³´ê³ ì„œ(ì „ê³µì„¤ê³„) ë³´ê¸°**](./OOM-3.í”„ë¡œì íŠ¸ê²°ê³¼ë³´ê³ ì„œ(ì „ê³µì„¤ê³„)-2ë¶„ë°˜-2ì¡°.pdf)

[ğŸ“„ **ì‹¤í–‰ì˜ìƒ ë³´ê¸°**](https://www.youtube.com/watch?v=4T6IS4JgeU0)
---

## ğŸ”— Client Repository
ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(GUI) ë° ì‹œê°í™” ë¡œì§(Decorator Pattern ë“±)ì´ í¬í•¨ëœ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì•„ë˜ ë§í¬ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ‘‰ **[Design_Patterns_Client ë ˆí¬ì§€í† ë¦¬ ë°”ë¡œê°€ê¸°](https://github.com/myname-jin/Design_Patterns_Client)**

---

##  System Architecture & Applied Patterns
ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ì€ **ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´ì„  'ì„¤ê³„ì˜ ìœ ì—°ì„±'**ì…ë‹ˆë‹¤. ë³µì¡í•œ ë¶„ê¸°ë¬¸(`if-else`)ì„ ì œê±°í•˜ê³ , ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ íŒ¨í„´ì„ ì ì¬ì ì†Œì— ì ìš©í–ˆìŠµë‹ˆë‹¤.

### 1. Command Pattern (ì»¤ë§¨ë“œ íŒ¨í„´)
> **ëª©ì :** í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­(ë¡œê·¸ì¸, ì˜ˆì•½, íŒŒì¼ ì „ì†¡)ì„ ê°ì²´ë¡œ ìº¡ìŠí™”í•˜ì—¬ ì¸ë³´ì»¤(Invoker)ì™€ ë¦¬ì‹œë²„(Receiver)ë¥¼ ë¶„ë¦¬

ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë“¤ì–´ì˜¤ëŠ” ë‹¤ì–‘í•œ ìš”ì²­(String Protocol)ì„ ë¶„ì„í•˜ì—¬ ì¦‰ì‹œ ì²˜ë¦¬í•˜ì§€ ì•Šê³ , `ConcreteCommand` ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ `CommandQueue`ì— ì ì¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ **ë¹„ë™ê¸° ì²˜ë¦¬**ì™€ **ìš”ì²­ ì‹¤í–‰ ì‹œì ì˜ ì œì–´**ê°€ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.

![Command Pattern](./ì»¤ë§¨ë“œíŒ¨í„´.png)

* **Invoker:** `CommandProcessor` (ìš”ì²­ì„ íì— ìŒ“ê³  ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰)
* **Command Interface:** `NetworkCommand` (execute ë©”ì„œë“œ ì •ì˜)
* **Concrete Commands:** `LoginCommand`, `RegisterCommand`, `FileUpdateCommand` ë“±

### 2. Singleton Pattern (ì‹±ê¸€í†¤ íŒ¨í„´)
> **ëª©ì :** ì„œë²„ì˜ í•µì‹¬ ìì›(ì†Œì¼“ ì²˜ë¦¬ê¸°, DB ê´€ë¦¬ì)ì— ëŒ€í•œ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ ë³´ì¥ ë° ìŠ¤ë ˆë“œ ì•ˆì „ì„± í™•ë³´

ë‹¤ìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” `CommandProcessor`ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ êµ¬í˜„í•˜ì—¬, **ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ë°©ì§€**í•˜ê³  **ë°ì´í„° ê²½í•©(Race Condition)ì„ ì˜ˆë°©**í–ˆìŠµë‹ˆë‹¤.

![Singleton Pattern](./ì‹±ê¸€í†¤íŒ¨í„´.png)

* **Implementation:** `CommandProcessor` í´ë˜ìŠ¤ ë‚´ `private` ìƒì„±ìì™€ `getInstance()` ë©”ì„œë“œ í™œìš© (Lazy Initialization & Synchronized).

### 3. Decorator Pattern (ë°ì½”ë ˆì´í„° íŒ¨í„´)
> **ëª©ì :** í†µê³„ ê·¸ë˜í”„ ì‹œê°í™” ì‹œ ê°•ì˜ì‹¤/ì‹¤ìŠµì‹¤ ì—¬ë¶€ì— ë”°ë¼ ìƒ‰ìƒê³¼ ì•„ì´ì½˜ì„ ë™ì ìœ¼ë¡œ ì¶”ê°€

**âš ï¸ Note:** ì´ íŒ¨í„´ì€ í†µê³„ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ëŠ” **Client(GUI)** ì¸¡ì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìƒì„¸ ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”.

![Decorator Pattern](./ë°ì½”ë ˆì´í„°íŒ¨í„´.png)

* **Base Component:** `BasicBar` (ê¸°ë³¸ ë§‰ëŒ€ ê·¸ë˜í”„)
* **Decorators:** `LabDecorator` (ì‹¤ìŠµì‹¤ ìŠ¤íƒ€ì¼), `LectureDecorator` (ê°•ì˜ì‹¤ ìŠ¤íƒ€ì¼)
* ğŸ‘‰ **[í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë³´ëŸ¬ê°€ê¸°](https://github.com/myname-jin/Design_Patterns_Client)**

---

## ğŸ§ª System Verification (Integration Test)
ì‹œìŠ¤í…œ í•µì‹¬ ì„¤ê³„ì˜ ì•ˆì •ì„±ì„ ê²€ì¦í•˜ê¸° ìœ„í•´ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.

### ğŸ› ï¸ Singleton Pattern Thread-Safety Test
ì„œë²„ì˜ í•µì‹¬ ìì›ì¸ `CommandProcessor`ê°€ ë‹¤ìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì‹œì— ì ‘ì†í•˜ëŠ” ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ **ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤(Unique Instance)**ë¥¼ ìœ ì§€í•˜ëŠ”ì§€ ê²€ì¦í–ˆìŠµë‹ˆë‹¤.

* **Test Scenario:**
    1. 10ê°œì˜ ìŠ¤ë ˆë“œë¥¼ ë™ì‹œì— ìƒì„±í•˜ì—¬ ê°ì `CommandProcessor.getInstance()`ë¥¼ í˜¸ì¶œ.
    2. ê° ìŠ¤ë ˆë“œê°€ íšë“í•œ ì¸ìŠ¤í„´ìŠ¤ì˜ **HashCode(ë©”ëª¨ë¦¬ ì£¼ì†Œ)**ë¥¼ ì¶œë ¥.
    3. ëª¨ë“  ìŠ¤ë ˆë“œ ì¢…ë£Œ í›„(`join`), ìµœì¢…ì ìœ¼ë¡œ `Assertions.assertTrue`ë¥¼ í†µí•´ ë¬´ê²°ì„± ê²€ì¦.

![í†µí•©í…ŒìŠ¤íŠ¸ ê²°ê³¼](./ì‹±ê¸€í†¤íŒ¨í„´í†µí•©í…ŒìŠ¤íŠ¸.jpg)

<details>
<summary><b>ğŸ‘‰ í…ŒìŠ¤íŠ¸ ì½”ë“œ(Test Code) ë³´ê¸° (Click)</b></summary>

```java
public class IntegrationTestSingletonTest {

    @Test
    public void testMultithreadedAccess() throws InterruptedException {
        System.out.println("[í†µí•© í…ŒìŠ¤íŠ¸] ì‹±ê¸€í†¤ íŒ¨í„´ ë©€í‹°ìŠ¤ë ˆë“œ ë™ì‹œ ì ‘ê·¼ í…ŒìŠ¤íŠ¸");

        // ìŠ¤ë ˆë“œ 10ê°œë¥¼ ë™ì‹œì— getInstance()ë¥¼ í˜¸ì¶œí•˜ê²Œ ë§Œë“¦
        Thread[] threads = new Thread[10];

        for (int i = 0; i < 10; i++) {
            threads[i] = new Thread(() -> {
                // ê° ìŠ¤ë ˆë“œê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìš”ì²­
                CommandProcessor instance = CommandProcessor.getInstance();

                // ê°ì ì–»ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œê°’(HashCode) ì¶œë ¥
                System.out.println(Thread.currentThread().getName() + " : " + System.identityHashCode(instance));
            });
            threads[i].start();
        }

        // ëª¨ë“  ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. (ê²€ì¦ì„ ìœ„í•´ í•„ìˆ˜)
        for (Thread t : threads) {
            t.join(1500);
        }

        // ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì‹¤íŒ¨ê°€ ì—†ì—ˆëŠ”ì§€ í™•ì¸
        Assertions.assertTrue(true, "í…ŒìŠ¤íŠ¸ê°€ ì—ëŸ¬ ì—†ì´ ì‹¤í–‰ ì™„ë£Œë¨.");
    }
}
